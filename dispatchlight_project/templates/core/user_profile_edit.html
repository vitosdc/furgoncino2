<!-- templates/core/user_profile_edit.html -->{% extends 'base.html' %}{% block title %}Modifica Profilo - DispatchLight{% endblock %}{% block content %}<div class="container my-4">    <div class="row">        <div class="col-12">            <div class="d-flex justify-content-between align-items-center mb-4">                <h1><i class="fas fa-user-edit"></i> Modifica Profilo</h1>                <a href="{% url 'core:user_profile' %}" class="btn btn-outline-secondary">                    <i class="fas fa-arrow-left"></i> Torna al Profilo                </a>            </div>        </div>    </div>    <div class="row justify-content-center">        <div class="col-lg-8">            <div class="card">                <div class="card-header bg-primary text-white">                    <h5><i class="fas fa-user-cog"></i> Informazioni Account</h5>                </div>                <div class="card-body">                    <form method="post">                        {% csrf_token %}                        <!-- Informazioni Non Modificabili -->                        <div class="alert alert-info">                            <h6><i class="fas fa-info-circle"></i> Informazioni Non Modificabili</h6>                            <div class="row">                                <div class="col-md-6">                                    <strong>Nome:</strong> {{ user.first_name|default:"Non specificato" }}                                </div>                                <div class="col-md-6">                                    <strong>Cognome:</strong> {{ user.last_name|default:"Non specificato" }}                                </div>                            </div>                            <small class="text-muted">                                <i class="fas fa-lock"></i>                                 Nome e cognome non possono essere modificati per motivi di sicurezza.                                 Contatta l'amministratore se necessario.                            </small>                        </div>                        <!-- Campi Modificabili -->                        <div class="row">                            <div class="col-md-6 mb-3">                                <label for="{{ form.username.id_for_label }}" class="form-label">                                    <i class="fas fa-user"></i> {{ form.username.label }}                                </label>                                {{ form.username }}                                {% if form.username.help_text %}                                    <div class="form-text">{{ form.username.help_text }}</div>                                {% endif %}                                {% if form.username.errors %}                                    <div class="text-danger small">{{ form.username.errors }}</div>                                {% endif %}                            </div>                            <div class="col-md-6 mb-3">                                <label for="{{ form.email.id_for_label }}" class="form-label">                                    <i class="fas fa-envelope"></i> {{ form.email.label }}                                </label>                                {{ form.email }}                                {% if form.email.help_text %}                                    <div class="form-text">{{ form.email.help_text }}</div>                                {% endif %}                                {% if form.email.errors %}                                    <div class="text-danger small">{{ form.email.errors }}</div>                                {% endif %}                            </div>                        </div>                        <!-- Sezione Cambio Password -->                        <hr>                        <h6 class="mb-3">                            <i class="fas fa-key"></i> Cambio Password (Opzionale)                        </h6>                        <div class="row">                            <div class="col-md-4 mb-3">                                <label for="{{ form.current_password.id_for_label }}" class="form-label">                                    {{ form.current_password.label }}                                </label>                                {{ form.current_password }}                                {% if form.current_password.help_text %}                                    <div class="form-text">{{ form.current_password.help_text }}</div>                                {% endif %}                                {% if form.current_password.errors %}                                    <div class="text-danger small">{{ form.current_password.errors }}</div>                                {% endif %}                            </div>                            <div class="col-md-4 mb-3">                                <label for="{{ form.new_password.id_for_label }}" class="form-label">                                    {{ form.new_password.label }}                                </label>                                {{ form.new_password }}                                {% if form.new_password.help_text %}                                    <div class="form-text">{{ form.new_password.help_text }}</div>                                {% endif %}                                {% if form.new_password.errors %}                                    <div class="text-danger small">{{ form.new_password.errors }}</div>                                {% endif %}                            </div>                            <div class="col-md-4 mb-3">                                <label for="{{ form.confirm_password.id_for_label }}" class="form-label">                                    {{ form.confirm_password.label }}                                </label>                                {{ form.confirm_password }}                                {% if form.confirm_password.errors %}                                    <div class="text-danger small">{{ form.confirm_password.errors }}</div>                                {% endif %}                            </div>                        </div>                        <!-- Errori generali del form -->                        {% if form.non_field_errors %}                            <div class="alert alert-danger">                                {{ form.non_field_errors }}                            </div>                        {% endif %}                        <!-- Pulsanti di azione -->                        <div class="d-flex justify-content-end gap-2">                            <a href="{% url 'core:user_profile' %}" class="btn btn-secondary">                                <i class="fas fa-times"></i> Annulla                            </a>                            <button type="submit" class="btn btn-primary">                                <i class="fas fa-save"></i> Salva Modifiche                            </button>                        </div>                    </form>                </div>            </div>            <!-- Informazioni di Sicurezza -->            <div class="card mt-4">                <div class="card-header bg-warning text-dark">                    <h5><i class="fas fa-shield-alt"></i> Sicurezza Account</h5>                </div>                <div class="card-body">                    <div class="row">                        <div class="col-md-6">                            <h6>Password Sicura</h6>                            <ul class="small text-muted">                                <li>Almeno 8 caratteri</li>                                <li>Combina lettere, numeri e simboli</li>                                <li>Non usare informazioni personali</li>                                <li>Cambiala ogni 3-6 mesi</li>                            </ul>                        </div>                        <div class="col-md-6">                            <h6>Email di Recupero</h6>                            <p class="small text-muted">                                L'email viene usata per:                            </p>                            <ul class="small text-muted">                                <li>Recupero password</li>                                <li>Notifiche di sicurezza</li>                                <li>Comunicazioni importanti</li>                            </ul>                        </div>                    </div>                </div>            </div>        </div>    </div></div><script>// JavaScript per mostrare/nascondere campi passworddocument.addEventListener('DOMContentLoaded', function() {    const currentPassword = document.getElementById('{{ form.current_password.id_for_label }}');    const newPassword = document.getElementById('{{ form.new_password.id_for_label }}');    const confirmPassword = document.getElementById('{{ form.confirm_password.id_for_label }}');        // Se l'utente inizia a digitare la password attuale, rendi obbligatori gli altri campi    currentPassword.addEventListener('input', function() {        if (this.value.length > 0) {            newPassword.required = true;            confirmPassword.required = true;        } else {            newPassword.required = false;            confirmPassword.required = false;        }    });});</script>{% endblock %}