{% extends 'base.html' %}{% block title %}Setup Guidato - DispatchLight{% endblock %}{% block content %}<div class="container my-4">    <div class="row">        <div class="col-12">            <div class="text-center mb-4">                <h1><i class="fas fa-magic"></i> Setup Guidato</h1>                <p class="lead">Configura la tua azienda in pochi semplici passi</p>            </div>        </div>    </div>        {% if company %}    <!-- Progress Bar -->    <div class="row mb-4">        <div class="col-12">            <div class="card">                <div class="card-body">                    <div class="d-flex justify-content-between align-items-center mb-2">                        <span><strong>Progresso Setup:</strong></span>                        <span>{{ steps_completed }}/{{ total_steps }} completati</span>                    </div>                    <div class="progress" style="height: 10px;">                        <div class="progress-bar" role="progressbar"                              style="width: {{ completion_percentage }}%">                        </div>                    </div>                </div>            </div>        </div>    </div>        <!-- Setup Steps -->    <div class="row g-4">        <!-- Step 1: Service Types -->        <div class="col-lg-6">            <div class="card h-100 {% if service_types_count > 0 %}border-success{% endif %}">                <div class="card-header d-flex justify-content-between align-items-center">                    <h5 class="mb-0">                        {% if service_types_count > 0 %}                            <i class="fas fa-check-circle text-success"></i>                        {% else %}                            <i class="fas fa-circle text-warning"></i>                        {% endif %}                        1. Tipi di Servizio                    </h5>                    {% if service_types_count > 0 %}                        <span class="badge bg-success">{{ service_types_count }} configurati</span>                    {% endif %}                </div>                <div class="card-body">                    <p class="text-muted">                        Definisci i tipi di intervento che offri (es. riparazione, installazione, manutenzione).                        Questo ti aiuterà a standardizzare i prezzi e i tempi.                    </p>                    {% if service_types_count == 0 %}                        <a href="/admin/core/servicetype/add/" class="btn btn-primary" target="_blank">                            <i class="fas fa-plus"></i> Configura Servizi                        </a>                        <button class="btn btn-outline-secondary" onclick="createDefaultServices()">                            <i class="fas fa-magic"></i> Usa Template                        </button>                    {% else %}                        <a href="/admin/core/servicetype/" class="btn btn-outline-success" target="_blank">                            <i class="fas fa-eye"></i> Visualizza ({{ service_types_count }})                        </a>                        <a href="/admin/core/servicetype/add/" class="btn btn-outline-primary" target="_blank">                            <i class="fas fa-plus"></i> Aggiungi Altri                        </a>                    {% endif %}                </div>            </div>        </div>                <!-- Step 2: Customers -->        <div class="col-lg-6">            <div class="card h-100 {% if customers_count > 0 %}border-success{% endif %}">                <div class="card-header d-flex justify-content-between align-items-center">                    <h5 class="mb-0">                        {% if customers_count > 0 %}                            <i class="fas fa-check-circle text-success"></i>                        {% else %}                            <i class="fas fa-circle text-warning"></i>                        {% endif %}                        2. Clienti                    </h5>                    {% if customers_count > 0 %}                        <span class="badge bg-success">{{ customers_count }} registrati</span>                    {% endif %}                </div>                <div class="card-body">                    <p class="text-muted">                        Aggiungi i tuoi clienti principali con indirizzi e contatti.                         Potrai sempre aggiungerne di nuovi quando ricevi nuove chiamate.                    </p>                    {% if customers_count == 0 %}                        <a href="{% url 'core:customer_create' %}" class="btn btn-primary">                            <i class="fas fa-user-plus"></i> Aggiungi Clienti                        </a>                    {% else %}                        <a href="{% url 'core:customer_list' %}" class="btn btn-outline-success">                            <i class="fas fa-eye"></i> Visualizza ({{ customers_count }})                        </a>                        <a href="{% url 'core:customer_create' %}" class="btn btn-outline-primary">                            <i class="fas fa-user-plus"></i> Aggiungi Altri                        </a>                    {% endif %}                </div>            </div>        </div>                <!-- Step 3: Technicians -->        <div class="col-lg-6">            <div class="card h-100 {% if technicians_count > 0 %}border-success{% endif %}">                <div class="card-header d-flex justify-content-between align-items-center">                    <h5 class="mb-0">                        {% if technicians_count > 0 %}                            <i class="fas fa-check-circle text-success"></i>                        {% else %}                            <i class="fas fa-circle text-warning"></i>                        {% endif %}                        3. Tecnici/Operatori                    </h5>                    {% if technicians_count > 0 %}                        <span class="badge bg-success">{{ technicians_count }} registrati</span>                    {% endif %}                </div>                <div class="card-body">                    <p class="text-muted">                        Registra i tuoi tecnici e operatori. Ogni tecnico avrà il suo account                         per ricevere ordini e aggiornare lo stato degli interventi.                    </p>                    {% if technicians_count == 0 %}                        <a href="{% url 'core:technician_create' %}" class="btn btn-primary">                            <i class="fas fa-user-cog"></i> Registra Tecnici                        </a>                    {% else %}                        <a href="{% url 'core:technician_list' %}" class="btn btn-outline-success">                            <i class="fas fa-eye"></i> Visualizza ({{ technicians_count }})                        </a>                        <a href="{% url 'core:technician_create' %}" class="btn btn-outline-primary">                            <i class="fas fa-user-plus"></i> Aggiungi Altri                        </a>                    {% endif %}                </div>            </div>        </div>                <!-- Step 4: First Order -->        <div class="col-lg-6">            <div class="card h-100 {% if orders_count > 0 %}border-success{% endif %}">                <div class="card-header d-flex justify-content-between align-items-center">                    <h5 class="mb-0">                        {% if orders_count > 0 %}                            <i class="fas fa-check-circle text-success"></i>                        {% else %}                            <i class="fas fa-circle text-secondary"></i>                        {% endif %}                        4. Primo Ordine                    </h5>                    {% if orders_count > 0 %}                        <span class="badge bg-success">{{ orders_count }} creati</span>                    {% endif %}                </div>                <div class="card-body">                    <p class="text-muted">                        Crea il tuo primo ordine di prova per testare il sistema.                         Potrai vedere come funziona l'assegnazione e il tracking.                    </p>                    {% if orders_count == 0 %}                        <a href="{% url 'core:order_create' %}" class="btn btn-primary">                            <i class="fas fa-plus"></i> Crea Primo Ordine                        </a>                    {% else %}                        <a href="{% url 'core:order_list' %}" class="btn btn-outline-success">                            <i class="fas fa-eye"></i> Visualizza ({{ orders_count }})                        </a>                        <a href="{% url 'core:order_create' %}" class="btn btn-outline-primary">                            <i class="fas fa-plus"></i> Crea Nuovo                        </a>                    {% endif %}                </div>            </div>        </div>    </div>        <!-- Completion Actions -->    <div class="row mt-5">        <div class="col-12">            <div class="card bg-light">                <div class="card-body text-center">                    {% if completion_percentage >= 75 %}                        <h4 class="text-success">                            <i class="fas fa-trophy"></i> Ottimo lavoro!                        </h4>                        <p class="lead">Il setup è quasi completo. Sei pronto per iniziare a usare DispatchLight!</p>                        <a href="{% url 'core:dashboard' %}" class="btn btn-success btn-lg">                            <i class="fas fa-rocket"></i> Vai alla Dashboard                        </a>                    {% else %}                        <h4 class="text-primary">Continua il Setup</h4>                        <p>Completa ancora qualche passaggio per sfruttare al massimo DispatchLight.</p>                        <div class="progress mb-3" style="height: 20px;">                            <div class="progress-bar" role="progressbar"                                  style="width: {{ completion_percentage }}%">                                {{ completion_percentage }}%                            </div>                        </div>                    {% endif %}                                        <div class="mt-3">                        <a href="{% url 'core:dashboard' %}" class="btn btn-outline-primary">                            <i class="fas fa-tachometer-alt"></i> Vai alla Dashboard                        </a>                        <button class="btn btn-outline-secondary" onclick="showTutorial()">                            <i class="fas fa-play"></i> Guarda Tutorial                        </button>                    </div>                </div>            </div>        </div>    </div>        {% else %}    <div class="alert alert-warning">        <i class="fas fa-exclamation-triangle"></i>         Errore nel caricamento dei dati aziendali.         <a href="{% url 'core:company_registration' %}">Torna alla registrazione</a>    </div>    {% endif %}</div><script>function createDefaultServices() {    // Placeholder per creare servizi default    alert('Funzionalità in arrivo: creeremo automaticamente alcuni tipi di servizio comuni per la tua attività!');}function showTutorial() {    // Placeholder per tutorial    alert('Tutorial video in arrivo!');}</script>{% endblock %}